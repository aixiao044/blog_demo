---
author: jzh
tags: 
     - javascript
---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>用户名，密码，一级密码重复验证</title>
    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/css/reset.css">
    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/css/bootstrap.min.css">
    <script type="text/javascript" src="{{ site.baseurl }}/js/weather/jquery-min.js"></script>
    <script type="text/javascript" src="{{ site.baseurl }}/js/bootstrap.min.js"></script>
    <style type="text/css">
    .demo1{
        background: #fff;
        margin-top:100px;
    }
    .demo1 .form {
        background: #336666;
        padding: 50px 0;
    }
    
    .demo1 label em {
        background: #F6B5B5;
        display: inline-block;
        margin: 2px 2px 2px 2px;
        width: 50px;
        height: 20px;
        font-style: italic;
        font-size: 14px;
    }
    
    .demo1 label .active {
        background: #F75C5C;
    }
    
    .demo1 .confirm {
        display: block;
        margin-top: 8px;
    }
    
    .msg,
    .demo1 .count-span {
        display: none;
    }
    
    .glyphicon-ok,
    .glyphicon-remove {
        display: none;
    }
    .filter-input{
        margin-bottom: 100px;
    }
    .form-wrap{
        height: 400px;
    }

    .form-group{
        height: 70px;
    }
    </style>
</head>

<body>
    <div class="demo1 container container-fluid">
        <div class="row">
            <div class="col-xs-12 col-md-12">
                <!--过滤空格-->
                <div class="filter-input">
                    <input class="input" type="text" value="[     点击按钮测试      ]" name="" id="input" />
                    <button class="btn btn-primary" id="btn">过滤空格</button>
                </div>
                <hr>
                <!--form-->
                <div class="row form-wrap">
                    <form class="form-horizontal" role="form">
                        <div class="form-group custom">
                            <label for="" class="col-sm-1 control-label">用户名</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="">
                                <span class="count-span"><b id="count">0</b>个字符</span>
                                <p class="msg"></p>
                            </div>
                            <!--icon-->
                            <div class="col-sm-1 no">
                                <span class="glyphicon glyphicon-remove"></span>
                            </div>
                        </div>
                        <div class="form-group pwd">
                            <label for="" class="col-sm-1 control-label">登录密码</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control input-pwd" id="">
                                <label><em class="active">弱</em><em>中</em><em>强</em></label>
                                <span class="count-span"><b id="pwd-count">0</b>个字符</span>
                                <p class="msg"></p>
                            </div>
                            <!--icon-->
                            <div class="col-sm-1 pwd1">
                                <span class="glyphicon glyphicon-remove"></span>
                            </div>

                            <label for="" class="col-sm-2 control-label">确认密码</label>
                            <div class="col-sm-3">
                                <input type="password" class="form-control pwd2" disabled="">
                                <p class="confirm"></p>
                            </div>
                            <!--icon-->
                            <div class="col-sm-1 pwd2-ico">
                                <span class="glyphicon glyphicon-remove"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-1 col-sm-10">
                                <button type="submit" class="btn btn-primary submitBtn">提交</button>
                            </div>
                        </div>
                    </form>
                   
                </div>
                <hr>
            </div>
        </div>
    </div>
    <script>
    /*
     *
     */
    $(document).ready(function() {

            $(".btn").click(function() {
                var value = $(".input").val();
                value = value.replace(/(\s|\u00A0)+|(\s|\u00A0)+/g, '');
                $(".input").val(value);
            })
        })
        /*
    
         */



    $(document).ready(function() {
        var oName = $(".custom input"), //用户名
            name_msg = $(".custom .msg"), //信息提示
            count = $("#count"), //统计输入
            name_lenth = 0;
        var oPwd = $(".pwd .input-pwd"),
            pwd_msg = $(".pwd .msg");

        var pwd2 = $(".pwd .pwd2");
        //计算字节长度
        function getLength(str) {
            str = str.replace(/[^\x00-xff]/g, "aa") //x00-xff 单字节
            return str.length;
        }
        //提示
        function tip1(tip, cls) {
            $(" ." + cls + " .glyphicon-ok").removeClass().addClass("glyphicon glyphicon-remove");
            var no = $(" ." + cls + " .glyphicon-remove");
            no.css({
                "display": "block",
                "width": "150px"
            });
            no.text(tip);
        }
        //字符串对比
        function findStr(str, n) {
            var tmp = 0;
            for (var i = 0; i < str.length; i++) {
                if (str.charAt(i) == n) {
                    tmp++
                }
            }
            return tmp;
        }
        //输入合法
        function inputOk(cls, cls2) {
            var a = "OK";
            tip1(a, "" + cls + "");
            $("." + cls + " .glyphicon-remove").removeClass().addClass("glyphicon glyphicon-ok");
            pwd_msg.css("display", "none");
            $("." + cls + " ." + cls2 + "").hide();
        }
        //用户名输入判断
        oName.bind({

                focus: function() {
                    name_msg.css("display", "block");
                    name_msg.html('<i>5-25个字符，一个汉字为2个字符</i>');
                },

                keyup: function() {
                    $(".custom .count-span").show();
                    name_lenth = getLength(this.value);
                    count.text(name_lenth);
                    if (name_lenth === 0) {
                        $(".custom .count-span").hide();
                    }
                },

                blur: function() {

                    var re = /[^\w\u4e00-\u9fa5]+/g;

                    if (re.test(this.value)) {
                        var a = "含有非法字符";
                        tip1(a, "custom");
                    } else if (this.value == "") {
                        var a = "不能为空";
                        tip1(a, "custom");
                    } else if (name_lenth > 25) {
                        var a = "长度大于25";
                        tip1(a, "custom");
                    } else if (name_lenth < 6) {
                        var a = "长度小于6";
                        tip1(a, "custom");
                    } else {
                        var a = "OK";
                        inputOk("custom", "count-span")
                    }
                }
            })
            //输入密码
        oPwd.bind({

            focus: function() {
                pwd_msg.show();
                pwd_msg.html('<i>6-16个字符,不能单独使用字母、符号、数字</i>')
            },

            keyup: function() {
                var count = $("#pwd-count")
                $(".pwd .count-span").show();
                name_lenth = getLength(this.value);
                count.text(name_lenth);
                if (name_lenth === 0) {
                    $(".pwd .count-span").hide();
                    $(".pwd .glyphicon-remove").hide();
                }
                if (name_lenth > 8) {
                    $(".pwd em").eq(2).addClass("active");
                } else {
                    $(".pwd em").eq(2).removeClass("active");
                }

                if (name_lenth > 2) {
                    $(".pwd em").eq(1).addClass("active");
                    $(".pwd .pwd2").removeAttr("disabled");
                    $(".pwd .confirm").html('<i>请再输入一次</i>')
                } else {
                    $(".pwd em").eq(1).removeClass("active");
                    $(".pwd .pwd2").attr("disabled", "");
                    $(".pwd .confirm").html('');
                    $(".pwd2-ico .glyphicon-remove").hide();
                }
            },

            blur: function() {
                var m = findStr(oPwd.val(), oPwd.val()[0]);
                var re_n = /[^\d]/g;
                var re_a = /[^a-zA-Z]/g;
                if (this.value == "") {
                    var a = "不能为空";
                    tip1(a, "pwd1");
                } else if (m == this.value.length) {
                    var a = "不能用相同字符";
                    tip1(a, "pwd1");
                } else if (!re_n.test(this.value)) {
                    var a = "不能全为数字";
                    tip1(a, "pwd1");
                } else if (!re_a.test(this.value)) {
                    var a = "不能全为字母";
                    tip1(a, "pwd1");
                } else if (this.value.length < 6 || this.value.length > 16) {
                    var a = "长度应为6-16个字符";
                    tip1(a, "pwd1");
                } else {
                    inputOk("pwd1", "pwd-count")
                }
            }
        })

        //密码是否相同
        pwd2.blur(function() {
            var c = oPwd.val()
            if (this.value !== c) {
                var a = "两次输入密码不一致";
                tip1(a, "pwd2-ico");
            } else {
                var a = "OK";
                tip1(a, "pwd2-ico");
                $(".pwd2-ico .glyphicon-remove").removeClass().addClass("glyphicon glyphicon-ok");     
            }

        })
    })
    </script>
</body>

</html>
